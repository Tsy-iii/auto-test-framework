# ğŸ” API è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›® | Pytest + Requests + Reqres API

è¿™æ˜¯ä¸€ä¸ªåŸºäº Python çš„ API è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®ï¼Œä½¿ç”¨ `pytest` æ¡†æ¶å’Œ `requests` åº“è¿›è¡Œæ¥å£éªŒè¯ï¼Œç›®æ ‡ç«™ç‚¹ä¸ºå…¬å¼€æµ‹è¯•å¹³å° [reqres.in](https://reqres.in)ã€‚é¡¹ç›®ä» 0 æ­å»ºï¼Œé€‚åˆåˆå­¦è€…ç»ƒä¹  API æµ‹è¯•ã€æµ‹è¯•å·¥ç¨‹å¸ˆç®€å†ä½œå“é›†å±•ç¤ºï¼Œä¹Ÿé€‚åˆä½œä¸ºåç»­æ¥å…¥ CI/CD çš„æµ‹è¯•å·¥ç¨‹ã€‚

---

## ğŸš€ æŠ€æœ¯æ ˆ & é¡¹ç›®äº®ç‚¹

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| âœ… Python 3.10+ | ä¸»è¯­è¨€ |
| âœ… requests | HTTP è¯·æ±‚å‘é€ |
| âœ… pytest | æµ‹è¯•æ¡†æ¶ã€å‚æ•°åŒ–ã€æ–­è¨€ç­‰ |
| âœ… pytest.ini | æµ‹è¯•ç›®å½•é…ç½®ä¸æ”¶æ•›æ§åˆ¶ |
| âœ… Session ä¼šè¯å°è£… | ä¿æŒ headerï¼Œå¦‚ç»Ÿä¸€ç®¡ç† API Key |
| âœ… å¤šç¯å¢ƒæ”¯æŒ | ä½¿ç”¨ conftest è¿›è¡Œç»Ÿä¸€é…ç½®ç®¡ç† |
| âœ… Git / GitHub | é¡¹ç›®ç‰ˆæœ¬ç®¡ç†ä¸åä½œ |

---

## ğŸ“‚ é¡¹ç›®ç»“æ„æ¦‚è§ˆ

```bash
api-test-framework/
â”œâ”€â”€ testcases/                # æµ‹è¯•ç”¨ä¾‹ç›®å½•
â”‚   â”œâ”€â”€ test_login.py         # ç™»å½•æ¥å£æµ‹è¯•
â”‚   â””â”€â”€ test_user_info.py     # ç”¨æˆ·ä¿¡æ¯æ¥å£æµ‹è¯•
â”‚
â”œâ”€â”€ data/                     # æµ‹è¯•æ•°æ®ï¼ˆjson/yaml ç­‰ï¼‰
â”‚   â””â”€â”€ login_data.json       # ç™»å½•å‚æ•°ç¤ºä¾‹
â”‚
â”œâ”€â”€ utils/                    # å·¥å…·æ¨¡å—
â”‚   â””â”€â”€ request_tool.py       # requests.Session å°è£…ç±»
â”‚
â”œâ”€â”€ config/                   # é…ç½®ç›®å½•
â”‚   â””â”€â”€ settings.py           # base_urlã€api-key ç­‰é…ç½®
â”‚
â”œâ”€â”€ conftest.py               # Pytest å…¨å±€ fixtureï¼ˆå¦‚ sessionï¼‰
â”œâ”€â”€ requirements.txt          # æ‰€æœ‰ä¾èµ–åŒ…
â”œâ”€â”€ pytest.ini                # pytest å¯åŠ¨é…ç½®
â””â”€â”€ README.md                 # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

---

## ğŸ“˜ ç¤ºä¾‹ç”¨ä¾‹ï¼šç™»å½•æ¥å£

```python
def test_login_success(session, base_url):
    url = f"{base_url}/login"
    payload = {
        "email": "eve.holt@reqres.in",
        "password": "cityslicka"
    }
    response = session.post(url, json=payload)
    assert response.status_code == 200
    assert "token" in response.json()
```

---

## âœ… å·²å®Œæˆçš„æ¥å£ç”¨ä¾‹æ¸…å•

| æ¨¡å—       | æ¥å£                             | åœºæ™¯è¯´æ˜                           |
|------------|----------------------------------|------------------------------------|
| ç™»å½•æ¥å£   | `POST /login`                    | æ­£å¸¸ç™»å½•ã€è´¦å·/å¯†ç ä¸ºç©ºã€é”™è¯¯ä¿¡æ¯æ ¡éªŒ |
| ç”¨æˆ·ä¿¡æ¯   | `GET /users/{id}`                | æ ¡éªŒç”¨æˆ·ä¿¡æ¯è¿”å›å­—æ®µã€çŠ¶æ€ç         |

---

## ğŸ“¦ å¿«é€Ÿå¼€å§‹ä½¿ç”¨

### å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### è¿è¡Œæµ‹è¯•

```bash
pytest -v
```

æˆ–è¿è¡ŒæŸä¸ªæŒ‡å®šæ¨¡å—ï¼š

```bash
pytest testcases/test_login.py -v
```

---

## ğŸ” ç¯å¢ƒä¸è®¤è¯è¯´æ˜

- æœ¬é¡¹ç›®ä½¿ç”¨ `reqres-free-v1` çš„ **x-api-key** éªŒè¯æ–¹å¼ã€‚
- æ‰€æœ‰è¯·æ±‚é€šè¿‡å°è£…åçš„ Session è‡ªåŠ¨æ·»åŠ è®¤è¯å¤´ï¼š

```python
self.session.headers.update({
    "x-api-key": settings.API_KEY
})
```

---

## ğŸŒ± å¯æ‹“å±•å»ºè®®

- âœ… æ¥å…¥ CIï¼ˆGitHub Actions / Jenkinsï¼‰
- âœ… æ”¯æŒ Allure æŠ¥å‘Šè¾“å‡º
- âœ… å¢åŠ é”™è¯¯æ—¥å¿—è¾“å‡ºä¸æ—¥å¿—å›æº¯
- âœ… å¤šæ¥å£ä¾èµ–ä¸²è”æµ‹è¯•
- âœ… ä» YAML / CSV åŠ è½½æµ‹è¯•æ•°æ®
- âœ… æ”¯æŒ token ç™»å½•åæå–åŠ¨æ€ token è‡ªåŠ¨å¸¦å…¥åç»­è¯·æ±‚

---

## ğŸ§‘â€ğŸ’» ä½œè€…ä¿¡æ¯

- **ä½œè€…**ï¼šå¶æ ‘æ½­ï¼ˆShutan Yeï¼‰  
- **åŸå¸‚**ï¼šæ·±åœ³  
- **GitHub**ï¼š[Tsy-iii](https://github.com/Tsy-iii)

---

## ğŸ“Œ é¡¹ç›®å£°æ˜

æœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ ä¸ç®€å†ä½œå“å±•ç¤ºï¼Œæµ‹è¯•æ¥å£æ¥æºäº [reqres.in](https://reqres.in)ï¼Œè¯¥ç«™ç‚¹ä¸ºå…¬å¼€æ¨¡æ‹Ÿæ¥å£å¹³å°ï¼Œé€‚åˆæ¥å£æµ‹è¯•å…¥é—¨ä½¿ç”¨ï¼Œæ— ä»»ä½•å•†ä¸šç”¨é€”ã€‚